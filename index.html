<!doctype html>
<html lang="it"><head>
<link rel="apple-touch-icon" href="./icons/icon-192.png">
<link rel="manifest" href="./manifest.json">
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Fenice • Home</title>
<style>:root{--bg:#0f1320;--panel:#12182a;--ink:#e9eef7;--ink2:#9bb0d0;--line:#2c3550}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--ink);
font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif}
.topbar{position:sticky;top:0;z-index:40;display:flex;justify-content:space-between;align-items:center;gap:12px;
background:#0b0e19;border-bottom:1px solid var(--line);padding:10px 14px}
.brand{font-weight:700}nav{display:flex;gap:8px;flex-wrap:wrap}
.nav-btn{color:var(--ink);text-decoration:none;border:1px solid var(--line);padding:6px 10px;border-radius:10px}.nav-btn.active{background:#1a2033}
.container{max-width:1100px;margin:0 auto;padding:16px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px;margin-bottom:12px}
.grid{display:grid;gap:12px;grid-template-columns:repeat(2,1fr)}@media(max-width:900px){.grid{grid-template-columns:1fr}}
.btn{display:inline-block;margin-top:10px;padding:10px 12px;border:1px solid var(--line);border-radius:10px;text-decoration:none;color:var(--ink);background:#1a2033;cursor:pointer}
.small{color:var(--ink2);font-size:12px}
.table{width:100%;border-collapse:collapse}.table th,.table td{border-bottom:1px solid #222a3d;padding:8px 6px;vertical-align:top}.table th{text-align:left;color:#9bb0d0}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.counter{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:2px 6px;background:#0b0e19}
.counter button{border:0;background:#1a2033;color:var(--ink);border-radius:8px;padding:4px 8px;cursor:pointer}
.counter .val{min-width:22px;text-align:center}
.grid-4{display:grid;gap:10px;grid-template-columns:repeat(4,1fr)}@media(max-width:900px){.grid-4{grid-template-columns:1fr 1fr}}
.chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:4px 10px;background:#0b0e19;font-size:12px}
.chip .dot{font-size:14px}
.tile{display:flex;justify-content:space-between;align-items:center}
.pills a{display:inline-block;margin:4px 6px 0 0;padding:6px 10px;border:1px solid var(--line);border-radius:999px;text-decoration:none;color:#e9eef7;background:#1a2033;font-size:12px}
.weeknav{display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap}
.meal{display:flex;gap:8px;align-items:center}
.badge-muscle{font-size:12px;border:1px solid var(--line);border-radius:8px;padding:2px 6px;margin-left:8px;opacity:.9}
hr.sep{border:none;border-top:1px dashed #2c3550;margin:10px 0}</style>
</head><body>
<header class="topbar"><div class="brand">Fenice</div><nav><a class="nav-btn active" href="index.html">🏠 Home</a><a class="nav-btn" href="fenice_diet_training_12w_all_ccapi.html">📅 Piano</a><a class="nav-btn" href="tools.html">⚙️ Strumenti</a><a class="nav-btn" href="fenice_diet_training_12w_all_ccapi.html#calendar">🗓️ Calendari</a><button id="btnInstall" class="nav-btn" style="display:none">⬇️ Installa</button></nav></header>
<div class="container">
  <div class="card">
    <h2>📅 Piano 12 settimane (ALL-IN-ONE)</h2>
    <p>Dieta + Allenamento + Galleria esercizi con <b>foto CC</b> e video.</p>
    <a class="btn" href="./fenice_diet_training_12w_all_ccapi.html">Apri il piano</a>
  </div>

  <div class="card">
    <h3>🏋️‍♂️ Overview allenamenti</h3>
    <div class="grid" id="tiles">
      <a class="card tile" href="./fenice_diet_training_12w_all_ccapi.html#train-upper1">
        <div><b>Upper 1</b><div class="small">Petto · Tricipiti</div></div>
        <span class="chip"><span class="dot" id="b-u1">🔵</span><span id="t-u1">–</span></span>
      </a>
      <a class="card tile" href="./fenice_diet_training_12w_all_ccapi.html#train-lower1">
        <div><b>Lower 1</b><div class="small">Quadricipiti · Polpacci</div></div>
        <span class="chip"><span class="dot" id="b-l1">🔵</span><span id="t-l1">–</span></span>
      </a>
      <a class="card tile" href="./fenice_diet_training_12w_all_ccapi.html#train-upper2">
        <div><b>Upper 2</b><div class="small">Spalle · Bicipiti</div></div>
        <span class="chip"><span class="dot" id="b-u2">🔵</span><span id="t-u2">–</span></span>
      </a>
      <a class="card tile" href="./fenice_diet_training_12w_all_ccapi.html#train-lower2">
        <div><b>Lower 2</b><div class="small">Femorali · Glutei</div></div>
        <span class="chip"><span class="dot" id="b-l2">🔵</span><span id="t-l2">–</span></span>
      </a>
    </div>
    <p class="small">Badge: 🟢 Oggi · 🟡 Domani · 🔵 Altri giorni.</p>
  </div>
</div>

<script>
const schedule={{1:null,2:'u1',3:'l1',4:'u2',5:null,6:'l2',0:null}};
const ids={{u1:['b-u1','t-u1'], l1:['b-l1','t-l1'], u2:['b-u2','t-u2'], l2:['b-l2','t-l2']}};
const today=new Date().getDay(), tomorrow=(today+1)%7; const tk=schedule[today], nk=schedule[tomorrow];
function setBadge(key,dot,text){{const a=ids[key]||[];const b=document.getElementById(a[0]),t=document.getElementById(a[1]);if(b&&t){{b.textContent=dot;t.textContent=text;}}}}
if(tk) setBadge(tk,'🟢','Oggi'); if(nk && nk!==tk) setBadge(nk,'🟡','Domani');
['u1','l1','u2','l2'].forEach(k=>{{const t=document.getElementById(ids[k][1]);if(t && t.textContent==='–'){{const dn=['Domenica','Lunedì','Martedì','Mercoledì','Giovedì','Venerdì','Sabato'];const d=Object.keys(schedule).find(x=>schedule[x]===k);if(d!=null)t.textContent=dn[parseInt(d,10)];}}}});
</script>

<script>
if('serviceWorker' in navigator){
  window.addEventListener('load', function(){
    navigator.serviceWorker.register('./service-worker.js')
      .catch(function(e){ console.warn('SW reg failed:', e); });
  });
}
</script>


<script>
// Install prompt handler
let deferredPrompt=null;
window.addEventListener('beforeinstallprompt',(e)=>{
  e.preventDefault();
  deferredPrompt=e;
  const b=document.getElementById('btnInstall');
  if(b){ b.style.display='inline-block'; }
});
const bi=document.getElementById('btnInstall');
if(bi){
  bi.addEventListener('click', async ()=>{
    if(!deferredPrompt){ alert('Installazione non disponibile su questo dispositivo/browser.'); return; }
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if(outcome!=='accepted'){ console.log('PWA install declined'); }
    deferredPrompt=null;
    bi.style.display='none';
  });
}
</script>

</body></html>

<script>
(function(){
  const schedule = {1:null,2:'u1',3:'l1',4:'u2',5:null,6:'l2',0:null};
  const ids = {u1:['b-u1','t-u1'], l1:['b-l1','t-l1'], u2:['b-u2','t-u2'], l2:['b-l2','t-l2']};
  function dn(i){return ['Domenica','Lunedì','Martedì','Mercoledì','Giovedì','Venerdì','Sabato'][i]}
  function fmt(d){const z=n=>String(n).padStart(2,'0'); return z(d.getDate())+'/'+z(d.getMonth()+1)}
  function labelForKey(k, baseDate){
    // Find weekday index that maps to key (this week's plan)
    const wd = Object.keys(schedule).find(x=>schedule[x]===k); if(wd==null) return '—';
    // compute date of this week's wd relative to today
    const today = new Date(baseDate); const diff = ( (parseInt(wd,10) - today.getDay()) + 7 ) % 7;
    const dt = new Date(today); dt.setDate(today.getDate()+diff);
    return dn(parseInt(wd,10)) + ' ' + fmt(dt);
  }
  function apply(){
    const now = new Date();
    const today = now.getDay(), tomorrow = (today+1)%7;
    const tk = schedule[today], nk = schedule[tomorrow];
    function setBadge(key, dot, text){
      const a = ids[key]||[]; const b=document.getElementById(a[0]), t=document.getElementById(a[1]);
      if(b&&t){ b.textContent = dot; t.textContent = text; }
    }
    // default labels with weekday+date
    Object.keys(ids).forEach(k=>{
      const t = document.getElementById(ids[k][1]);
      if(t){ t.textContent = labelForKey(k, now); }
    });
    if(tk) setBadge(tk,'🟢','Oggi'); 
    if(nk && nk!==tk) setBadge(nk,'🟡','Domani');
  }
  if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', apply); } else { apply(); }
})();
</script>
